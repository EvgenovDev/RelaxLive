(()=>{"use strict";const e=({classPopup:e,otherItemsClass:t,activeClass:l,closeClass:o,modalClass:a})=>{const c=document.querySelector(`.${e}`),r=document.querySelectorAll(`.${t}`);try{if(!c||!r.length)throw Error("Классы переданы неверно,либо не существуют");r.forEach((e=>{e.addEventListener("click",(e=>{c.classList.add(l)}))})),c.addEventListener("click",(e=>{!e.target.classList.contains(o)&&e.target.closest(`.${a}`)||c.classList.remove(l)}))}catch(e){console.log(e.message)}};((e,t)=>{const l=document.querySelectorAll(".header-contacts__phone-number"),o=document.querySelector(".header-contacts__arrow");try{if(!l.length||!o)throw Error("Классы телефона или стрелки переданы не верно");o.addEventListener("click",(e=>{l[1].classList.toggle("header-contacts__phone-number-accord--active"),o.classList.toggle("header-accord-arrow-active")}))}catch(e){console.log(e.message)}})(),(e=>{const t=document.querySelector(`.${e}`),l=document.querySelector(".popup-dialog-menu"),o=document.querySelector(".menu__icon"),a=(e,t)=>{let l=t(e);document.getElementById(l).scrollIntoView({behavior:"smooth"})},c=e=>{let t=e.getAttribute("href");return t.slice(1,t.length)};document.addEventListener("click",(e=>{var t;e.target.closest(".button-footer")&&(e.preventDefault(),a(e.target,c),l.classList.contains("popup-menu-dialog--active--big")&&l.classList.remove("popup-menu-dialog--active--big")),t=e,document.documentElement.clientWidth>576&&t.target===o?l.classList.add("popup-menu-dialog--active--big"):document.documentElement.clientWidth<576&&t.target===o&&l.classList.add("popup-menu-dialog--active--small")})),t.addEventListener("click",(e=>{(e.target.classList.contains("close-menu")||!e.target.closest(".popup-menu-main")||e.target.classList.contains("menu-link"))&&document.documentElement.clientWidth>576?(l.classList.remove("popup-menu-dialog--active--big"),e.target.classList.contains("menu-link")&&!e.target.classList.contains("no-overflow")&&(e.preventDefault(),a(e.target,c))):(e.target.classList.contains("close-menu")||!e.target.closest(".popup-menu-main")||e.target.classList.contains("menu-link"))&&document.documentElement.clientWidth<576&&(l.classList.remove("popup-menu-dialog--active--small"),e.target.classList.contains("menu-link")&&!e.target.classList.contains("no-overflow")&&(e.preventDefault(),a(e.target,c)))}))})("popup-menu"),(e=>{const t=document.querySelectorAll(`.${e}>input`),l=document.querySelectorAll("form>label>.feedback-block__form-input_phone");function o(e){let t="+7 (___) ___-__-__",l=0,o=t.replace(/\D/g,""),a=this.value.replace(/\D/g,"");o.length>=a.length&&(a=o),this.value=t.replace(/./g,(function(e){return/[_\d]/.test(e)&&l<a.length?a.charAt(l++):l>=a.length?"":e})),"blur"==e.type?2==this.value.length&&(this.value=""):function(e,t){if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let l=t.createTextRange();l.collapse(!0),l.moveEnd("character",e),l.moveStart("character",e),l.select()}}(this.value.length,this)}try{if(!t.length||!l.length)throw Error("Блоков с телефонами не существует");t.forEach((e=>{e.setAttribute("placeholder","+7 (___) ___-__-__"),e.addEventListener("input",o,!1),e.addEventListener("focus",o,!1),e.addEventListener("blur",o,!1)})),l.forEach((e=>{e.setAttribute("placeholder","+7 (___) ___-__-__"),e.addEventListener("input",o,!1),e.addEventListener("focus",o,!1),e.addEventListener("blur",o,!1)}))}catch(e){console.log(e.message)}})("feedback__input"),(e=>{const t=document.querySelectorAll("form");try{if(!t)throw Error("Ни одной формы не существует");t.forEach((l=>{let o=l.querySelector(".checkbox__input");const a=l.querySelector(".checkbox__label");l.addEventListener("click",(c=>{if(c.target==a)a.classList.contains("fail__checkbox")&&a.classList.remove("fail__checkbox");else if(c.target==l.querySelectorAll("input")[0])l.querySelectorAll("input")[0].classList.remove("fail__input");else if(c.target==l.querySelectorAll("input")[1])l.querySelectorAll("input")[1].classList.remove("fail__input");else if(c.target==l.querySelector("button")){c.preventDefault();let a=(e=>{let t=!1;if(e.classList.contains("feedback__form"))return!(""==e.querySelector("input").value&&e.querySelector("input").value.length<18)&&{tel:e.querySelector("input").value};if(e.classList.contains("feedback-block__form")){for(let l=0;l<e.querySelectorAll("input").length;l++)""==e.querySelectorAll("input")[l]&&(e.querySelectorAll("input")[l].classList.add("fail__input"),t=!0),e.querySelectorAll("input")[1].value.length<18&&(e.querySelectorAll("input")[1].classList.add("fail__input"),t=!0),e.querySelectorAll("input")[0].value.length<2&&(e.querySelectorAll("input")[0].classList.add("fail__input"),t=!0);return!t&&{name:e.querySelectorAll("input")[0].value,tel:e.querySelectorAll("input")[1].value}}})(l);o.checked&&a?(({data:l,url:o,method:a,header:c})=>{fetch(o,{method:a,headers:c,body:JSON.stringify(l)}).then((e=>e.json())).then((e=>{console.log(e)})).then((()=>{(e=>{const t=document.querySelector(`.${e}`);try{if(!t)throw Error("Неправильный класс модалки спасибо");t.classList.add("popup-thank--active")}catch(e){console.log(e.message)}})(e)})).then((()=>{setTimeout((()=>{document.querySelector(`.${e}`).classList.remove("popup-thank--active")}),3e3)})).then((()=>{t.forEach((e=>{e.querySelectorAll("input").forEach((e=>{e.value=""}))})),document.querySelectorAll(".checkbox>input").forEach((e=>{e.checked=!1}))})).catch((e=>{console.log(e.message)}))})({data:a,method:"POST",header:{"Content-Type":"application/json;charset=utf-8"},url:"https://jsonplaceholder.typicode.com/posts"}):l.querySelectorAll(".checkbox__label").forEach((e=>{e.classList.add("fail__checkbox")}))}}))}))}catch(e){console.log(e.message)}})("popup-thank"),e({classPopup:"popup-consultation",otherItemsClass:"button_wide",activeClass:"popup-consultation--active",closeClass:"close-consultation",modalClass:"feedback-wrap"}),e({classPopup:"popup-privacy",otherItemsClass:"link-privacy",activeClass:"popup-privacy--active",closeClass:"close-privacy",modalClass:"popup-dialog-privacy"}),e({classPopup:"popup-repair-types",otherItemsClass:"no-overflow",activeClass:"popup-repair-types--active",closeClass:"close",modalClass:"popup-dialog-repair-types"}),e({classPopup:"popup-repair-types",otherItemsClass:"link-list-repair",activeClass:"popup-repair-types--active",closeClass:"close",modalClass:"popup-dialog-repair-types"}),(()=>{const e=e=>{document.querySelector(e).innerHTML=""};(()=>{const t=document.querySelector(".popup-repair-types-content-table"),l=t.querySelector(".popup-repair-types-content-table__list"),o=document.querySelectorAll(".popup-repair-types-nav__item")[1],a=t.querySelectorAll("tbody>.mobile-row")[1];document.addEventListener("click",(c=>{(c.target.classList.contains("no-overflow")||c.target==document.querySelectorAll(".link-list-repair>a")[1])&&document.querySelector(".popup-repair-types--active")&&(e(".nav-list-popup-repair"),("http://localhost:3000/api/items",fetch("http://localhost:3000/api/items")).then((e=>e.json())).then((c=>{let r=[];if(c[0]){let e=c[0].name;r=c.filter((t=>{if(t.type!=e)return e=t.type,t.type}))}(({array:e,button:t,parentClass:l})=>{let o=document.querySelector(l);try{if(!e.length)throw Error("Данные с сервера получены не верно, либо данных нет");for(let l=0;l<e.length;l++){const a=t.cloneNode(!0);a.textContent=e[l].type,o.append(a)}}catch(e){console.log(e.message)}})({array:r,button:o,parentClass:".nav-list-popup-repair"}),(({data:t,parentTable:l,table:o,tr:a})=>{try{t.forEach((e=>{if("Потолок: Демонтажные работы"==t.type){let t=a.cloneNode(!0),l=o.cloneNode();t.querySelector(".repair-types-name").textContent=e.name,t.querySelectorAll(".repair-types-value")[0].textContent=e.units,t.querySelectorAll(".repair-types-value")[1].textContent=`${e.cost}руб.`,l.append(t)}})),document.querySelectorAll(".popup-repair-types-nav__item").forEach((c=>{c.addEventListener("click",(r=>{document.getElementById("switch-inner").textContent=c.textContent,e(".popup-repair-types-content-table");let s=o.cloneNode();l.append(s),t.forEach((e=>{if(c.textContent==e.type){let t=a.cloneNode(!0);t.querySelector(".repair-types-name").textContent=e.name,t.querySelectorAll(".repair-types-value")[0].textContent=e.units,t.querySelectorAll(".repair-types-value")[1].textContent=`${e.cost}руб.`,s.append(t)}}))}))}))}catch(e){console.log(e.message)}})({data:c,table:l,tr:a,parentTable:t})})).catch((e=>console.log(e.message))))}))})()})()})();